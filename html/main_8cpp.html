<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 507 Term Project: src/main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME 507 Term Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &lt;ESP32Servo.h&gt;</code><br />
<code>#include &lt;Adafruit_BNO08x.h&gt;</code><br />
<code>#include &lt;Wire.h&gt;</code><br />
<code>#include &lt;WiFi.h&gt;</code><br />
<code>#include &lt;WebServer.h&gt;</code><br />
<code>#include &quot;taskshare.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_i_m_u_8h_source.html">IMU.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_motor_driver_8h_source.html">MotorDriver.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_p_i_d___controller_8h_source.html">PID_Controller.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a624f0ff95049ef223c4ad372502ced01"><td class="memItemLeft" align="right" valign="top"><a id="a624f0ff95049ef223c4ad372502ced01" name="a624f0ff95049ef223c4ad372502ced01"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>IN1_1</b>&#160;&#160;&#160;13</td></tr>
<tr class="separator:a624f0ff95049ef223c4ad372502ced01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00255327cfc357b6136390aa65b736ee"><td class="memItemLeft" align="right" valign="top"><a id="a00255327cfc357b6136390aa65b736ee" name="a00255327cfc357b6136390aa65b736ee"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>IN2_1</b>&#160;&#160;&#160;12</td></tr>
<tr class="separator:a00255327cfc357b6136390aa65b736ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0c643a9004840b6c515d633d89b0420"><td class="memItemLeft" align="right" valign="top"><a id="ac0c643a9004840b6c515d633d89b0420" name="ac0c643a9004840b6c515d633d89b0420"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>IN1_2</b>&#160;&#160;&#160;14</td></tr>
<tr class="separator:ac0c643a9004840b6c515d633d89b0420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ebe430a8f3883ae81058b7557da839b"><td class="memItemLeft" align="right" valign="top"><a id="a9ebe430a8f3883ae81058b7557da839b" name="a9ebe430a8f3883ae81058b7557da839b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>IN2_2</b>&#160;&#160;&#160;27</td></tr>
<tr class="separator:a9ebe430a8f3883ae81058b7557da839b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a316d1bbf3dcf9c43e56fe4e25addf626"><td class="memItemLeft" align="right" valign="top"><a id="a316d1bbf3dcf9c43e56fe4e25addf626" name="a316d1bbf3dcf9c43e56fe4e25addf626"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SERVO</b>&#160;&#160;&#160;32</td></tr>
<tr class="separator:a316d1bbf3dcf9c43e56fe4e25addf626"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae98ccb48a054fa01c6d69ca72f0fc894"><td class="memItemLeft" align="right" valign="top"><a id="ae98ccb48a054fa01c6d69ca72f0fc894" name="ae98ccb48a054fa01c6d69ca72f0fc894"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>IMU_ADDR</b>&#160;&#160;&#160;0x4A</td></tr>
<tr class="separator:ae98ccb48a054fa01c6d69ca72f0fc894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9625b87456d850c5816b93d8f4177527"><td class="memItemLeft" align="right" valign="top"><a id="a9625b87456d850c5816b93d8f4177527" name="a9625b87456d850c5816b93d8f4177527"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>IMU_SCL</b>&#160;&#160;&#160;21</td></tr>
<tr class="separator:a9625b87456d850c5816b93d8f4177527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade9e8d91a9ae6c553dd1f4c641282a0c"><td class="memItemLeft" align="right" valign="top"><a id="ade9e8d91a9ae6c553dd1f4c641282a0c" name="ade9e8d91a9ae6c553dd1f4c641282a0c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>IMU_SDA</b>&#160;&#160;&#160;22</td></tr>
<tr class="separator:ade9e8d91a9ae6c553dd1f4c641282a0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a64d553857a8aad29d88572e1bfdd2712"><td class="memItemLeft" align="right" valign="top"><a id="a64d553857a8aad29d88572e1bfdd2712" name="a64d553857a8aad29d88572e1bfdd2712"></a>
Share&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>drive_val</b> (&quot;drive_val&quot;)</td></tr>
<tr class="separator:a64d553857a8aad29d88572e1bfdd2712"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bb30f8242d18d0ec5525e5ef11fae3b"><td class="memItemLeft" align="right" valign="top"><a id="a0bb30f8242d18d0ec5525e5ef11fae3b" name="a0bb30f8242d18d0ec5525e5ef11fae3b"></a>
Share&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>angle_val</b> (&quot;angle_val&quot;)</td></tr>
<tr class="separator:a0bb30f8242d18d0ec5525e5ef11fae3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15e8783b7a1afe7bcdc4728e2a7f03bf"><td class="memItemLeft" align="right" valign="top"><a id="a15e8783b7a1afe7bcdc4728e2a7f03bf" name="a15e8783b7a1afe7bcdc4728e2a7f03bf"></a>
Share&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>pwm_val</b> (&quot;pwm_val&quot;)</td></tr>
<tr class="separator:a15e8783b7a1afe7bcdc4728e2a7f03bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad9148f0df810d7eda98bdbd4eeb9557"><td class="memItemLeft" align="right" valign="top"><a id="aad9148f0df810d7eda98bdbd4eeb9557" name="aad9148f0df810d7eda98bdbd4eeb9557"></a>
Share&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>steer_val</b> (&quot;steer_val&quot;)</td></tr>
<tr class="separator:aad9148f0df810d7eda98bdbd4eeb9557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48f3f185be3ea2d153c347a157b38d42"><td class="memItemLeft" align="right" valign="top"><a id="a48f3f185be3ea2d153c347a157b38d42" name="a48f3f185be3ea2d153c347a157b38d42"></a>
WebServer&#160;</td><td class="memItemRight" valign="bottom"><b>server</b> (80)</td></tr>
<tr class="separator:a48f3f185be3ea2d153c347a157b38d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c76379ee09416d38717b0508bda3baa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a2c76379ee09416d38717b0508bda3baa">balance</a> (void *p_params)</td></tr>
<tr class="memdesc:a2c76379ee09416d38717b0508bda3baa"><td class="mdescLeft">&#160;</td><td class="mdescRight">The task that controls the bike's reaction wheel.  <br /></td></tr>
<tr class="separator:a2c76379ee09416d38717b0508bda3baa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea8b44c0a89e84170af71b081c72ff62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aea8b44c0a89e84170af71b081c72ff62">drive</a> (void *p_params)</td></tr>
<tr class="memdesc:aea8b44c0a89e84170af71b081c72ff62"><td class="mdescLeft">&#160;</td><td class="mdescRight">The task that runs the drive motor.  <br /></td></tr>
<tr class="separator:aea8b44c0a89e84170af71b081c72ff62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1927d82247d44014ef099d1681483cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#af1927d82247d44014ef099d1681483cb">steer</a> (void *p_params)</td></tr>
<tr class="memdesc:af1927d82247d44014ef099d1681483cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The task that runs the steer servo.  <br /></td></tr>
<tr class="separator:af1927d82247d44014ef099d1681483cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80690a49a1268bbad9e6f4acfd0990b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a80690a49a1268bbad9e6f4acfd0990b2">handleIMU</a> ()</td></tr>
<tr class="memdesc:a80690a49a1268bbad9e6f4acfd0990b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the <a class="el" href="class_i_m_u.html">IMU</a> value to the server.  <br /></td></tr>
<tr class="separator:a80690a49a1268bbad9e6f4acfd0990b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa67ed1eb38ab727eb1b4d3abce08c4a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aa67ed1eb38ab727eb1b4d3abce08c4a4">handlePWM</a> ()</td></tr>
<tr class="memdesc:aa67ed1eb38ab727eb1b4d3abce08c4a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the PWM value to the server.  <br /></td></tr>
<tr class="separator:aa67ed1eb38ab727eb1b4d3abce08c4a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8282893fb7d2adb5c7ec9c97102e0c13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a8282893fb7d2adb5c7ec9c97102e0c13">handleKP</a> ()</td></tr>
<tr class="memdesc:a8282893fb7d2adb5c7ec9c97102e0c13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the controller with a new KP value.  <br /></td></tr>
<tr class="separator:a8282893fb7d2adb5c7ec9c97102e0c13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f0d21b2fcaaec9feb05ec900bd94d76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a4f0d21b2fcaaec9feb05ec900bd94d76">handleKI</a> ()</td></tr>
<tr class="memdesc:a4f0d21b2fcaaec9feb05ec900bd94d76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the controller with a new KI value.  <br /></td></tr>
<tr class="separator:a4f0d21b2fcaaec9feb05ec900bd94d76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab75ba4d308fc0772e18de0e97b0b6e65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ab75ba4d308fc0772e18de0e97b0b6e65">handleKD</a> ()</td></tr>
<tr class="memdesc:ab75ba4d308fc0772e18de0e97b0b6e65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the controller with a new KD value.  <br /></td></tr>
<tr class="separator:ab75ba4d308fc0772e18de0e97b0b6e65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8427468f39342a1990703e9f5ce7fd29"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a8427468f39342a1990703e9f5ce7fd29">handleRoot</a> ()</td></tr>
<tr class="memdesc:a8427468f39342a1990703e9f5ce7fd29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the inital webpage on a new reqeust.  <br /></td></tr>
<tr class="separator:a8427468f39342a1990703e9f5ce7fd29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17c28fca639c93575afa55f6a5497a23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a17c28fca639c93575afa55f6a5497a23">handleSteer</a> ()</td></tr>
<tr class="memdesc:a17c28fca639c93575afa55f6a5497a23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the servo value.  <br /></td></tr>
<tr class="separator:a17c28fca639c93575afa55f6a5497a23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adafb60da22e8dd1622442f868d12fd55"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#adafb60da22e8dd1622442f868d12fd55">handleDrive</a> ()</td></tr>
<tr class="memdesc:adafb60da22e8dd1622442f868d12fd55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the drive value.  <br /></td></tr>
<tr class="separator:adafb60da22e8dd1622442f868d12fd55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6aea58a091cea8ae9cb796285022e65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ad6aea58a091cea8ae9cb796285022e65">handleSetpoint</a> ()</td></tr>
<tr class="memdesc:ad6aea58a091cea8ae9cb796285022e65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the Setpoint value to the server.  <br /></td></tr>
<tr class="separator:ad6aea58a091cea8ae9cb796285022e65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5ee48eab4f6bfe930d7684fbf3be098"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ac5ee48eab4f6bfe930d7684fbf3be098">resetSetpoint</a> ()</td></tr>
<tr class="memdesc:ac5ee48eab4f6bfe930d7684fbf3be098"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the setpoint value to 0.  <br /></td></tr>
<tr class="separator:ac5ee48eab4f6bfe930d7684fbf3be098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="memdesc:a4fc01d736fe50cf5b977f755b675f11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up certain aspects of the bike balancer.  <br /></td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="memdesc:afe461d27b9c48d5921c00d521181f12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles a new user when they connect to the ESP.  <br /></td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab7eaefeafe574cbf45415789bf672403"><td class="memItemLeft" align="right" valign="top"><a id="ab7eaefeafe574cbf45415789bf672403" name="ab7eaefeafe574cbf45415789bf672403"></a>
Servo&#160;</td><td class="memItemRight" valign="bottom"><b>myservo</b></td></tr>
<tr class="separator:ab7eaefeafe574cbf45415789bf672403"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a888f1949cc679094e9096956f59e2fad"><td class="memItemLeft" align="right" valign="top"><a id="a888f1949cc679094e9096956f59e2fad" name="a888f1949cc679094e9096956f59e2fad"></a>
<a class="el" href="class_motor_driver.html">MotorDriver</a>&#160;</td><td class="memItemRight" valign="bottom"><b>motor2</b> = <a class="el" href="class_motor_driver.html">MotorDriver</a>(IN1_1, IN2_1)</td></tr>
<tr class="separator:a888f1949cc679094e9096956f59e2fad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d7b39809d8488235ab281d80ea4776"><td class="memItemLeft" align="right" valign="top"><a id="ac9d7b39809d8488235ab281d80ea4776" name="ac9d7b39809d8488235ab281d80ea4776"></a>
<a class="el" href="class_motor_driver.html">MotorDriver</a>&#160;</td><td class="memItemRight" valign="bottom"><b>motor1</b> = <a class="el" href="class_motor_driver.html">MotorDriver</a>(IN1_2, IN2_2)</td></tr>
<tr class="separator:ac9d7b39809d8488235ab281d80ea4776"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dee5f5f3630376614fe15b706f3853f"><td class="memItemLeft" align="right" valign="top"><a id="a6dee5f5f3630376614fe15b706f3853f" name="a6dee5f5f3630376614fe15b706f3853f"></a>
<a class="el" href="class_i_m_u.html">IMU</a>&#160;</td><td class="memItemRight" valign="bottom"><b>bno</b> = <a class="el" href="class_i_m_u.html">IMU</a>(IMU_ADDR, IMU_SCL, IMU_SDA)</td></tr>
<tr class="separator:a6dee5f5f3630376614fe15b706f3853f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d54e0d97be76040a43bf9fce34b2f4"><td class="memItemLeft" align="right" valign="top"><a id="ad1d54e0d97be76040a43bf9fce34b2f4" name="ad1d54e0d97be76040a43bf9fce34b2f4"></a>
<a class="el" href="class_p_i_d___controller.html">PID_Controller</a>&#160;</td><td class="memItemRight" valign="bottom"><b>controller</b> = <a class="el" href="class_p_i_d___controller.html">PID_Controller</a>(motor1, 225, 0.1, 1000, 0, 1)</td></tr>
<tr class="separator:ad1d54e0d97be76040a43bf9fce34b2f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a587ba0cb07f02913598610049a3bbb79"><td class="memItemLeft" align="right" valign="top"><a id="a587ba0cb07f02913598610049a3bbb79" name="a587ba0cb07f02913598610049a3bbb79"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>ssid</b> = &quot;Controller&quot;</td></tr>
<tr class="separator:a587ba0cb07f02913598610049a3bbb79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4a2ebcb494493f648ae1e6975672575"><td class="memItemLeft" align="right" valign="top"><a id="aa4a2ebcb494493f648ae1e6975672575" name="aa4a2ebcb494493f648ae1e6975672575"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>password</b> = &quot;password1&quot;</td></tr>
<tr class="separator:aa4a2ebcb494493f648ae1e6975672575"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ce953b230abc945187143a2f924967f"><td class="memItemLeft" align="right" valign="top"><a id="a0ce953b230abc945187143a2f924967f" name="a0ce953b230abc945187143a2f924967f"></a>
const char html[]&#160;</td><td class="memItemRight" valign="bottom"><b>PROGMEM</b></td></tr>
<tr class="separator:a0ce953b230abc945187143a2f924967f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains the main program for the bike balancing program</p>
<dl class="section author"><dt>Author</dt><dd>Mathew Smith and Cal Miller </dd></dl>
<dl class="section date"><dt>Date</dt><dd>8-Dec-2023 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a2c76379ee09416d38717b0508bda3baa" name="a2c76379ee09416d38717b0508bda3baa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c76379ee09416d38717b0508bda3baa">&#9670;&#160;</a></span>balance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void balance </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The task that controls the bike's reaction wheel. </p>
<p>This taks starts reading from the <a class="el" href="class_i_m_u.html">IMU</a>. If there is a new data value then it will run the controller with the new value. If there is no new data, then it will countinue to resue the previous data. The controller will update the reaction wheel with a new pwm value, depending on the error from the centerpoint. </p>

</div>
</div>
<a id="aea8b44c0a89e84170af71b081c72ff62" name="aea8b44c0a89e84170af71b081c72ff62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea8b44c0a89e84170af71b081c72ff62">&#9670;&#160;</a></span>drive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void drive </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The task that runs the drive motor. </p>
<p>The task updates the drive motor pwm every time it is ran. The value it updates with comes from the web server. </p>

</div>
</div>
<a id="adafb60da22e8dd1622442f868d12fd55" name="adafb60da22e8dd1622442f868d12fd55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adafb60da22e8dd1622442f868d12fd55">&#9670;&#160;</a></span>handleDrive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleDrive </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the drive value. </p>
<p>Changes the drive value so that the driving task can update the motor with a new value </p>

</div>
</div>
<a id="a80690a49a1268bbad9e6f4acfd0990b2" name="a80690a49a1268bbad9e6f4acfd0990b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80690a49a1268bbad9e6f4acfd0990b2">&#9670;&#160;</a></span>handleIMU()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleIMU </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the <a class="el" href="class_i_m_u.html">IMU</a> value to the server. </p>
<p>The task gets whatever the most recent <a class="el" href="class_i_m_u.html">IMU</a> value from the reaction wheel task. It then sends this value to the server so it can update the webpage. </p>

</div>
</div>
<a id="ab75ba4d308fc0772e18de0e97b0b6e65" name="ab75ba4d308fc0772e18de0e97b0b6e65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab75ba4d308fc0772e18de0e97b0b6e65">&#9670;&#160;</a></span>handleKD()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleKD </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the controller with a new KD value. </p>
<p>The task takes the new KD value from the server and changes the controller to the new value. </p>

</div>
</div>
<a id="a4f0d21b2fcaaec9feb05ec900bd94d76" name="a4f0d21b2fcaaec9feb05ec900bd94d76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f0d21b2fcaaec9feb05ec900bd94d76">&#9670;&#160;</a></span>handleKI()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleKI </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the controller with a new KI value. </p>
<p>The task takes the new KI value from the server and changes the controller to the new value. </p>

</div>
</div>
<a id="a8282893fb7d2adb5c7ec9c97102e0c13" name="a8282893fb7d2adb5c7ec9c97102e0c13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8282893fb7d2adb5c7ec9c97102e0c13">&#9670;&#160;</a></span>handleKP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleKP </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the controller with a new KP value. </p>
<p>The task takes the new KP value from the server and changes the controller to the new value. </p>

</div>
</div>
<a id="aa67ed1eb38ab727eb1b4d3abce08c4a4" name="aa67ed1eb38ab727eb1b4d3abce08c4a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa67ed1eb38ab727eb1b4d3abce08c4a4">&#9670;&#160;</a></span>handlePWM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handlePWM </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the PWM value to the server. </p>
<p>The task gets whatever the most recent PWM value from the reaction wheel task. It then sends this value to the server so it can update the webpage. </p>

</div>
</div>
<a id="a8427468f39342a1990703e9f5ce7fd29" name="a8427468f39342a1990703e9f5ce7fd29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8427468f39342a1990703e9f5ce7fd29">&#9670;&#160;</a></span>handleRoot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleRoot </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the inital webpage on a new reqeust. </p>
<p>Sends the new user the webpage so that the user can interact with the bike. </p>

</div>
</div>
<a id="ad6aea58a091cea8ae9cb796285022e65" name="ad6aea58a091cea8ae9cb796285022e65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6aea58a091cea8ae9cb796285022e65">&#9670;&#160;</a></span>handleSetpoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleSetpoint </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the Setpoint value to the server. </p>
<p>The task gets whatever the most recent Setpoint value from the reaction wheel task. It then sends this value to the server so it can update the webpage. </p>

</div>
</div>
<a id="a17c28fca639c93575afa55f6a5497a23" name="a17c28fca639c93575afa55f6a5497a23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17c28fca639c93575afa55f6a5497a23">&#9670;&#160;</a></span>handleSteer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleSteer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the servo value. </p>
<p>Changes the steer value so that the steering task can update the servo with a new value </p>

</div>
</div>
<a id="afe461d27b9c48d5921c00d521181f12f" name="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&#160;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles a new user when they connect to the ESP. </p>
<p>When a new user connects or makes a new GET request, the server must know which function to run based on the request. The handle client function will tell the server where to go. </p>

</div>
</div>
<a id="ac5ee48eab4f6bfe930d7684fbf3be098" name="ac5ee48eab4f6bfe930d7684fbf3be098"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5ee48eab4f6bfe930d7684fbf3be098">&#9670;&#160;</a></span>resetSetpoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void resetSetpoint </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the setpoint value to 0. </p>
<p>This function reset the setpoint of the controller to 0 to counteract possible wandering from dithering </p>

</div>
</div>
<a id="a4fc01d736fe50cf5b977f755b675f11d" name="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&#160;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up certain aspects of the bike balancer. </p>
<p>Sets up the server, serial, and multitasking function for the bike balancer. </p>

</div>
</div>
<a id="af1927d82247d44014ef099d1681483cb" name="af1927d82247d44014ef099d1681483cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1927d82247d44014ef099d1681483cb">&#9670;&#160;</a></span>steer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void steer </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The task that runs the steer servo. </p>
<p>The task updates the steer servo every time it is ran. The value it updates with comes from the web server. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
